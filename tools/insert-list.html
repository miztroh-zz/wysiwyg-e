<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../iron-icons/editor-icons.html">
<link rel="import" href="../../iron-a11y-keys/iron-a11y-keys.html">
<link rel="import" href="../../paper-tooltip/paper-tooltip.html">
<link rel="import" href="../../iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../wysiwyg-tool-behavior.html">
<link rel="import" href="../wysiwyg-tool-styles.html">
<dom-module id="wysiwyg-tool-insert-ordered-list">
	<template>
		<style include="wysiwyg-tool-styles"></style>
		<style>
			paper-icon-button[disabled] {
				color: inherit;
			}
		</style>
		<paper-icon-button icon="editor:format-list-numbered" disabled="[[disabled]]"></paper-icon-button>
	</template>
	<script>
		Polymer(
			{
				is: 'wysiwyg-tool-insert-ordered-list',
				behaviors: [
					WYSIWYG.ToolBehavior
				],
				ready: function () {
					this._setCommand('insertOrderedList');
				}
			}
		);
	</script>
</dom-module>
<dom-module id="wysiwyg-tool-insert-unordered-list">
	<template>
		<style include="wysiwyg-tool-styles"></style>
		<style>
			paper-icon-button[disabled] {
				color: inherit;
			}
		</style>
		<paper-icon-button icon="editor:format-list-bulleted" disabled="[[disabled]]"></paper-icon-button>
	</template>
	<script>
		Polymer(
			{
				is: 'wysiwyg-tool-insert-unordered-list',
				behaviors: [
					WYSIWYG.ToolBehavior
				],
				ready: function () {
					this._setCommand('insertUnorderedList');
				}
			}
		);
	</script>
</dom-module>
<dom-module id="wysiwyg-tool-insert-list">
	<template>
		<style>
			:host {
				display: block;
			}

			#layout[disabled] {
			  pointer-events: none;
			}
		</style>
		<div class="layout horizontal" disabled="[[disabled]]" id="layout">
			<wysiwyg-tool-insert-ordered-list id="ordered" disabled="[[disabled]]"></wysiwyg-tool-insert-ordered-list>
			<wysiwyg-tool-insert-unordered-list id="unordered" disabled="[[disabled]]"></wysiwyg-tool-insert-unordered-list>
		</div>
		<paper-tooltip id="tooltip" disabled$="[[disabled]]">[[modifier.tooltip]] + Shift + L</paper-tooltip>
		<iron-a11y-keys id="a11y" target="[[keysTarget]]" keys="[[modifier.key]]+shift+l" on-keys-pressed="_keysPressed"></iron-a11y-keys>
	</template>
	<script>
		Polymer(
			{
				is: 'wysiwyg-tool-insert-list',
				behaviors: [
					WYSIWYG.ToolBehavior
				],
				execCommand: function () {},
				_canRedoChanged: function () {
					this.$.ordered._setCanRedo(this.canRedo);
					this.$.unordered._setCanRedo(this.canRedo);
				},
				_canUndoChanged: function () {
					this.$.ordered._setCanUndo(this.canUndo);
					this.$.unordered._setCanUndo(this.canUndo);
				},
				_click: function () {},
				_commonAncestorPathChanged: function () {
					this.$.ordered._setCommonAncestorPath(this.commonAncestorPath);
					this.$.unordered._setCommonAncestorPath(this.commonAncestorPath);
				},
				_computeDisabled: function () {
					if (!this.range0) return true;
					return !document.queryCommandEnabled('insertOrderedList');
				},
				_keysPressed: function (event, detail) {
					if (this.$.ordered.queryCommandState()) {
						this.$.unordered.execCommand(event);
					} else if (this.$.unordered.queryCommandState()) {
						this.$.unordered.execCommand(event);
					} else {
						this.$.ordered.execCommand(event);
					}
				},
				_keysTargetChanged: function () {
					this.$.ordered._setKeysTarget(this.keysTarget);
					this.$.unordered._setKeysTarget(this.keysTarget);
				},
				_range0Changed: function () {
					this.$.ordered._setRange0(this.range0);
					this.$.unordered._setRange0(this.range0);
				},
				_selectedLinkChanged: function () {
					this.$.ordered._setSelectedLink(this.selectedLink);
					this.$.unordered._setSelectedLink(this.selectedLink);
				},
				_valueChanged: function () {
					this.$.ordered._setValue(this.value);
					this.$.unordered._setValue(this.value);
				}
			}
		);
	</script>
</dom-module>